{"version":3,"file":"index.js","names":["agens","require","makeParser","startRuleName","rawStr","parse","startRule","dfltTypes","types","setTypeParser","overridePGENVConfig","key","uKey","toUpperCase","val","process","env","AgensGraph","pg","Client","Query","Pool","Connection","module","exports"],"sources":["../lib/index.js"],"sourcesContent":["/*\n * Copyright (c) 2014-2016, Bitnine Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst agens = require(\"./agens.js\");\n\nfunction makeParser(startRuleName) {\n    return function (rawStr) {\n        if (!rawStr) return null;\n        return agens.parse(rawStr, {startRule: startRuleName})\n    }\n}\n\n/*\n*\n* public static final int JSONB = 3802;\n    public static final int GRAPHID_ARRAY = 7001;\n    public static final int GRAPHID = 7002;\n    public static final int VERTEX_ARRAY = 7011;\n    public static final int VERTEX = 7012;\n    public static final int EDGE_ARRAY = 7021;\n    public static final int EDGE = 7022;\n    public static final int GRAPHPATH_ARRAY = 7031;\n    public static final int GRAPHPATH = 7032;\n*\n* */\n\n// add graph data types\nconst dfltTypes = require('pg').types;\ndfltTypes.setTypeParser(7012, makeParser('_Vertex'));\ndfltTypes.setTypeParser(7011, makeParser('VertexArray'));\ndfltTypes.setTypeParser(7022, makeParser('_Edge'));\ndfltTypes.setTypeParser(7021, makeParser('EdgeArray'));\ndfltTypes.setTypeParser(7032, makeParser('_Path'));\n\n\n// override connection parameters\nconst overridePGENVConfig = function (key) {\n    const uKey = key.toUpperCase();\n    const val = process.env['AG' + uKey];\n    if (val)\n        process.env['PG' + uKey] = val;\n    else\n        delete process.env['PG' + uKey];\n};\noverridePGENVConfig('USER');\noverridePGENVConfig('PASSWORD');\noverridePGENVConfig('DATABASE');\noverridePGENVConfig('HOST');\noverridePGENVConfig('PORT');\noverridePGENVConfig('BINARY');\noverridePGENVConfig('CLIENT_ENCODING');\noverridePGENVConfig('APPNAME');\n\nconst AgensGraph = function () {\n    this.pg = require('pg');\n    this.Client = this.pg.Client;\n    this.Query = this.pg.Query;\n    this.Pool = this.pg.Pool;\n    this.Connection = this.pg.Connection;\n};\n\nmodule.exports = new AgensGraph();\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMA,KAAK,GAAGC,OAAO,CAAC,YAAY,CAAC;AAEnC,SAASC,UAAUA,CAACC,aAAa,EAAE;EAC/B,OAAO,UAAUC,MAAM,EAAE;IACrB,IAAI,CAACA,MAAM,EAAE,OAAO,IAAI;IACxB,OAAOJ,KAAK,CAACK,KAAK,CAACD,MAAM,EAAE;MAACE,SAAS,EAAEH;IAAa,CAAC,CAAC;EAC1D,CAAC;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAMI,SAAS,GAAGN,OAAO,CAAC,IAAI,CAAC,CAACO,KAAK;AACrCD,SAAS,CAACE,aAAa,CAAC,IAAI,EAAEP,UAAU,CAAC,SAAS,CAAC,CAAC;AACpDK,SAAS,CAACE,aAAa,CAAC,IAAI,EAAEP,UAAU,CAAC,aAAa,CAAC,CAAC;AACxDK,SAAS,CAACE,aAAa,CAAC,IAAI,EAAEP,UAAU,CAAC,OAAO,CAAC,CAAC;AAClDK,SAAS,CAACE,aAAa,CAAC,IAAI,EAAEP,UAAU,CAAC,WAAW,CAAC,CAAC;AACtDK,SAAS,CAACE,aAAa,CAAC,IAAI,EAAEP,UAAU,CAAC,OAAO,CAAC,CAAC;;AAGlD;AACA,MAAMQ,mBAAmB,GAAG,SAAAA,CAAUC,GAAG,EAAE;EACvC,MAAMC,IAAI,GAAGD,GAAG,CAACE,WAAW,CAAC,CAAC;EAC9B,MAAMC,GAAG,GAAGC,OAAO,CAACC,GAAG,CAAC,IAAI,GAAGJ,IAAI,CAAC;EACpC,IAAIE,GAAG,EACHC,OAAO,CAACC,GAAG,CAAC,IAAI,GAAGJ,IAAI,CAAC,GAAGE,GAAG,CAAC,KAE/B,OAAOC,OAAO,CAACC,GAAG,CAAC,IAAI,GAAGJ,IAAI,CAAC;AACvC,CAAC;AACDF,mBAAmB,CAAC,MAAM,CAAC;AAC3BA,mBAAmB,CAAC,UAAU,CAAC;AAC/BA,mBAAmB,CAAC,UAAU,CAAC;AAC/BA,mBAAmB,CAAC,MAAM,CAAC;AAC3BA,mBAAmB,CAAC,MAAM,CAAC;AAC3BA,mBAAmB,CAAC,QAAQ,CAAC;AAC7BA,mBAAmB,CAAC,iBAAiB,CAAC;AACtCA,mBAAmB,CAAC,SAAS,CAAC;AAE9B,MAAMO,UAAU,GAAG,SAAAA,CAAA,EAAY;EAC3B,IAAI,CAACC,EAAE,GAAGjB,OAAO,CAAC,IAAI,CAAC;EACvB,IAAI,CAACkB,MAAM,GAAG,IAAI,CAACD,EAAE,CAACC,MAAM;EAC5B,IAAI,CAACC,KAAK,GAAG,IAAI,CAACF,EAAE,CAACE,KAAK;EAC1B,IAAI,CAACC,IAAI,GAAG,IAAI,CAACH,EAAE,CAACG,IAAI;EACxB,IAAI,CAACC,UAAU,GAAG,IAAI,CAACJ,EAAE,CAACI,UAAU;AACxC,CAAC;AAEDC,MAAM,CAACC,OAAO,GAAG,IAAIP,UAAU,CAAC,CAAC","ignoreList":[]}